---
prev:
  text: 'DNSが名前解決する仕組み'
  link: '/network/1'
next: false
---

<h1 Style="text-align: center;">購入したドメインをIPアドレスに紐付ける</h1>
<p Style="text-align: center;">2025-02-20</p>

## 概要

Webサイトを公開するためには、購入したドメインとIPアドレスを紐付ける必要があります。

意外とここでつまづくことが多いので、今回はその設定方法を解説します。

DNSについての基本的な解説は、別記事で紹介していますので、[こちら](https://kyoto-kanko.jp/network/1.html)を参照してください。

## Step.1 ドメインの購入

多くのドメインレジストラが提供しており、希望するドメイン名を選んで購入することができます。

| ドメインレジストラ     | 特徴                               |
|---------------|----------------------------------|
| **お名前.com**   | 日本国内での人気が高く、日本語対応が充実             |
| **ムームードメイン**  | 安価でドメイン取得が可能                     |
| **GoDaddy**   | 世界的に有名なレジストラで、ドメイン以外にも多様なサービスを提供 |
| **Namecheap** | 安価なな価格設定と使いやすいインターフェース           |

## Step.2 レコードの設定

ドメインを購入したら、次はDNSレコードを設定して、ドメインを特定のIPアドレスに紐付けます。

DNSレコードは、Webサイトへのアクセスを適切に誘導するために重要です。設定する際のレコードの種類についても理解しておく必要があります。

### レコードの種類

| レコード種類    | 説明                                     | 使用例                                            |
|-----------|----------------------------------------|------------------------------------------------|
| **A**     | ドメイン名をIPv4アドレスに紐付けるレコード。               | `example.com` を `192.168.1.1` に紐付ける            |
| **AAAA**  | IPv6アドレスに対応するAレコード。IPv6アドレスを使用する場合に設定。 | `example.com` を `2001:0db8::1` に紐付ける           |
| **CNAME** | サブドメインを別のドメイン名に紐付けるレコード。               | `www.example.com` を `example.com` に紐付ける        |
| **MX**    | メールサーバーを指定するレコード。メールサーバーの設定に必要。        | `example.com` のメールサーバーを `mail.example.com` に指定 |
| **NS**    | ドメインに関連するDNSサーバーを指定するレコード。             | `example.com` のDNSサーバーを `ns1.example.com` に指定  |
| **TXT**   | 任意のテキスト情報をDNSに記録するレコード。所有権確認やSPF設定に使用。 | `example.com` のSPF設定やドメイン所有権確認用のテキスト           |

### ドメインレジストラで管理する場合

ドメインを購入したレジストラの管理画面から、DNSレコードの設定が可能です。大抵は、以下の手順で設定できます。

1. 管理画面にログイン
2. 「DNS設定」や「DNS管理」を選択
3. 必要なレコード（Aレコード、CNAMEレコードなど）を追加
4. レコードを保存し、変更を反映

### 外部DNSで管理する場合

もし外部のDNSサービス（例: Cloudflare、AWS Route 53など）でDNSを管理している場合は、レジストラのDNS設定画面で外部DNSサーバーを指定する必要があります。

1. 外部DNSサービスに登録し、ドメインを管理画面に追加
2. 必要なDNSレコードを外部サービスで設定
3. ドメインレジストラの管理画面で、NSレコードを外部DNSサーバーに変更

## Step.3 ドメインの確認

DNSレコードを設定した後、設定が正しく反映されたか確認することが重要です。

変更が反映されるまでには数分から数時間程度かかることがあります。

### 設定確認方法

以下のコマンドで設定が反映されているかを確認できます。

```bash
dig example.com
```

## セキュリティ上の注意

### 1. **DNSSECの有効化**

DNSSEC（DNS Security Extensions）は、DNSのセキュリティを強化するための機能です。

これにより、DNSキャッシュポイズニングや中間者攻撃を防ぐことができます。

### 2. **Aレコードの管理**

IPアドレスが変更された場合には、速やかにDNSレコードを更新するようにしましょう。

変更が反映されるまでの時間差が原因で、サービスが一時的にアクセスできなくなることを防げます。

### 3. **SSL/TLS証明書の導入**

WebサイトでHTTPS通信を使用するためには、SSL/TLS証明書を導入する必要があります。

これにより、通信内容が暗号化され、中間者攻撃（MITM）を防ぐことができます。

### 4. **サブドメインテイクオーバーに注意**

不要なサブドメインが存在すると、攻撃者がそれを悪用してサブドメインテイクオーバーを行う可能性があります。

使用していないサブドメインは削除し、CNAMEレコードなどが外部サービスに紐付けられている場合には、管理権限を適切に設定するようにしましょう。

## 最後に

サブドメインテイクオーバーが少し話題になっていたので、今回の記事を書いてみました🚀
